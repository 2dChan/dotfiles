---
description: Commit
agent: build
---

Всегда общайтесь с пользователем на русском. Сообщения коммитов и описания кода всегда на английском.

## Общие проверки

- Анализ языка и тестов: Проверить тесты (файлы/конфиги). Если есть, запустить (пример: go test для golang). Другие - искать команды. OK - далее; fail - стоп.
- Анализ стиля коммитов: !`git log --oneline -10`. Определить стиль из истории. Если conventional commits, следовать https://www.conventionalcommits.org/en/v1.0.0/.

## Submodule: Initial Change Check

Проверить статус репозитория: `git status` (staged, unstaged, untracked).

## Commit Flow

- Если есть staged изменения, обработать как single commit.
- Иначе, проанализировать unstaged: `git diff`. Определить, можно ли разделить на группы (по теме/фиче). Предложить группы пользователю через question tool.

Для каждого коммита (single или group):

- Stage изменения: `git add <files>` или `git add .` для single.
- Проверить изменения: !`git diff --staged`
- Провести код-ревью: выделить issues, улучшения, best practices.
- Применить общие проверки (язык/тесты, стиль).
- Сгенерировать сообщение по стилю.
- Спросить перед подтверждением.
- Если да, коммит: `git commit -m "message"`.
- Иначе пропустить.